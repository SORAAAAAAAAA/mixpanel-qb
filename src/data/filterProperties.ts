import { FilterProperty } from "@/types/filter-property";
import { Calendar, Eye, Hash, Type, Sparkles, Users, List, Link } from "lucide-react";

// All available properties (no source distinction - recents are determined dynamically)
export const filterProperties: FilterProperty[] = [
    // ===== USER PROPERTIES =====
    {
        id: "created",
        label: "Created",
        icon: Calendar,
        category: "user",
        dataType: "date",
        description: "The time that the profile was created.",
        trackedAs: "$created",
        example: "2018-01-01T00:00:00",
    },
    {
        id: "connected-accounts",
        label: "# connected accounts",
        icon: Hash,
        category: "user",
        dataType: "number",
        description: "Number of accounts connected to this user profile.",
        trackedAs: "connected_accounts",
        example: "5",
    },
    {
        id: "age",
        label: "# age",
        icon: Hash,
        category: "user",
        dataType: "number",
        description: "The age of the user.",
        trackedAs: "age",
        example: "25",
    },
    {
        id: "credit-score",
        label: "# credit score",
        icon: Hash,
        category: "user",
        dataType: "number",
        description: "The credit score of the user.",
        trackedAs: "credit_score",
        example: "750",
    },
    {
        id: "net-worth",
        label: "# net worth ($USD)",
        icon: Hash,
        category: "user",
        dataType: "number",
        description: "The net worth of the user in USD.",
        trackedAs: "net_worth",
        example: "50000",
    },
    {
        id: "products",
        label: "products",
        icon: List,
        category: "user",
        dataType: "list",
        description: "List of products associated with the user.",
        trackedAs: "products",
        example: "[\"savings\", \"checking\"]",
    },
    {
        id: "avatar-url",
        label: "Avatar URL",
        icon: Link,
        category: "user",
        dataType: "string",
        description: "URL to the user's avatar image.",
        trackedAs: "$avatar",
        example: "https://example.com/avatar.png",
    },
    {
        id: "city",
        label: "City",
        icon: Type,
        category: "user",
        dataType: "string",
        description: "The city of the user.",
        trackedAs: "$city",
        example: "San Francisco",
    },
    {
        id: "country-code",
        label: "Country Code",
        icon: Type,
        category: "user",
        dataType: "string",
        description: "The country code of the user.",
        trackedAs: "$country_code",
        example: "US",
    },
    {
        id: "email",
        label: "Email",
        icon: Type,
        category: "user",
        dataType: "string",
        description: "The email address of the user.",
        trackedAs: "$email",
        example: "user@example.com",
    },
    {
        id: "geo-source",
        label: "Geo Source",
        icon: Type,
        category: "user",
        dataType: "string",
        description: "The source of the geographic data.",
        trackedAs: "$geo_source",
        example: "reverse_geocoding",
    },
    {
        id: "name",
        label: "Name",
        icon: Type,
        category: "user",
        dataType: "string",
        description: "The name of the user.",
        trackedAs: "$name",
        example: "John Doe",
    },
    {
        id: "operating-system",
        label: "Operating System",
        icon: Type,
        category: "user",
        dataType: "string",
        description: "The operating system of the user's device.",
        trackedAs: "$os",
        example: "iOS",
    },
    {
        id: "region",
        label: "Region",
        icon: Type,
        category: "user",
        dataType: "string",
        description: "The region/state of the user.",
        trackedAs: "$region",
        example: "California",
    },
    {
        id: "distinct-id",
        label: "Distinct ID",
        icon: Type,
        category: "user",
        dataType: "string",
        description: "The unique identifier for this user.",
        trackedAs: "$distinct_id",
        example: "user_12345",
    },

    // ===== EVENT PROPERTIES (Users who did...) =====
    {
        id: "event-app-open",
        label: "app open",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "app open",
        description: "Triggered when the user opens the app.",
        trackedAs: "app_open",
        example: "true",
    },
    {
        id: "event-connect-account",
        label: "connect account",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "connect account",
        description: "Triggered when a user connects an external account.",
        trackedAs: "connect_account",
        example: "true",
    },
    {
        id: "event-deposit",
        label: "deposit",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "deposit",
        description: "A user deposits money.",
        trackedAs: "deposit",
        example: "completed",
    },
    {
        id: "event-transfer",
        label: "transfer",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "transfer",
        description: "Triggered when a user transfers money.",
        trackedAs: "transfer",
        example: "true",
    },
    {
        id: "event-check-balance",
        label: "check balance",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "check balance",
        description: "Triggered when a user checks their balance.",
        trackedAs: "check_balance",
        example: "true",
    },
    {
        id: "event-withdrawal",
        label: "withdrawal",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "withdrawal",
        description: "Triggered when a user withdraws money.",
        trackedAs: "withdrawal",
        example: "true",
    },
    {
        id: "event-app-install",
        label: "app install",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "app install",
        description: "Triggered when a user installs the app.",
        trackedAs: "app_install",
        example: "true",
    },
    {
        id: "event-ad-data",
        label: "ad data",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "ad data",
        description: "Advertisement attribution data.",
        trackedAs: "ad_data",
        example: "true",
    },
    {
        id: "event-page-view",
        label: "page view",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "page view",
        description: "Triggered when a user views a page.",
        trackedAs: "page_view",
        example: "true",
    },
    {
        id: "event-onboard-complete",
        label: "onboard complete",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "onboard complete",
        description: "Triggered when a user completes onboarding.",
        trackedAs: "onboard_complete",
        example: "true",
    },
    {
        id: "event-enrollment",
        label: "enrollment",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "enrollment",
        description: "Triggered when a user completes enrollment.",
        trackedAs: "enrollment",
        example: "completed",
    },
    {
        id: "event-sign-in",
        label: "sign in",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "sign in",
        description: "Triggered when a user signs in.",
        trackedAs: "sign_in",
        example: "true",
    },
    {
        id: "event-session-start",
        label: "session (start)",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "session (start)",
        description: "Triggered when a user session starts.",
        trackedAs: "session_start",
        example: "true",
    },
    {
        id: "event-sign-out",
        label: "sign out",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "sign out",
        description: "Triggered when a user signs out.",
        trackedAs: "sign_out",
        example: "true",
    },
    {
        id: "event-bill-pay",
        label: "bill pay",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "bill pay",
        description: "Triggered when a user pays a bill.",
        trackedAs: "bill_pay",
        example: "true",
    },
    {
        id: "event-view-transactions",
        label: "view transactions",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "view transactions",
        description: "Triggered when a user views their transactions.",
        trackedAs: "view_transactions",
        example: "true",
    },
    {
        id: "event-session-end",
        label: "session (end)",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "session (end)",
        description: "Triggered when a user session ends.",
        trackedAs: "session_end",
        example: "true",
    },
    {
        id: "event-any",
        label: "Any event",
        icon: Sparkles,
        category: "event",
        dataType: "event",
        eventName: "Any event",
        description: "Match users who performed any event.",
        trackedAs: "any_event",
        example: "true",
    },

    // ===== COMPUTED PROPERTIES =====
    {
        id: "first-seen",
        label: "First Seen",
        icon: Eye,
        category: "computed",
        dataType: "date",
        description: "The first time this user was seen in Mixpanel (computed automatically).",
        trackedAs: "$mp_first_event_time",
        example: "2018-01-01T00:00:00",
    },

    // ===== COHORTS =====
    {
        id: "cohort-power-users",
        label: "ðŸ’ª Power Users",
        icon: Users,
        category: "cohort",
        dataType: "cohort",
        cohortName: "Power Users",
        description: "Users in the Power Users cohort.",
        trackedAs: "cohort_power_users",
    },
    {
        id: "cohort-active-users",
        label: "ðŸŸ¢ Active Users",
        icon: Users,
        category: "cohort",
        dataType: "cohort",
        cohortName: "Active Users",
        description: "Users who are currently active.",
        trackedAs: "cohort_active_users",
    },
    {
        id: "cohort-dormant-users",
        label: "ðŸ˜´ Dormant Users",
        icon: Users,
        category: "cohort",
        dataType: "cohort",
        cohortName: "Dormant Users",
        description: "Users who have been inactive for a period of time.",
        trackedAs: "cohort_dormant_users",
    },
    {
        id: "cohort-dad",
        label: "ðŸ‘¨ dad",
        icon: Users,
        category: "cohort",
        dataType: "cohort",
        cohortName: "dad",
        description: "Custom cohort: dad.",
        trackedAs: "cohort_dad",
    },
];

// Get property by ID
export const getPropertyById = (id: string): FilterProperty | undefined =>
    filterProperties.find((p) => p.id === id);

// Get recent properties based on stored IDs
export const getRecentProperties = (recentIds: string[]): FilterProperty[] =>
    recentIds
        .map((id) => getPropertyById(id))
        .filter((p): p is FilterProperty => p !== undefined);

// Get all properties (duplicates with recents are allowed)
export const getAllProperties = (): FilterProperty[] => filterProperties;
